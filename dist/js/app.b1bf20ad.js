(function(){"use strict";var e={1885:function(e,t,a){var s=a(5130),n=a(6768),r=a(4232);const l={class:"wrapper"},i={class:"right-panel"},o={class:"logo-container"},c={class:"nav-buttons"},u={class:"button-list"},d={key:0},p={key:1},h={key:2},g={key:3},k={key:4,class:"welcome-message"},m={key:5},v={key:6};function f(e,t,a,s,f,L){const b=(0,n.g2)("router-view"),y=(0,n.g2)("TheWelcome"),w=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("header",null,[(0,n.Lk)("div",l,[(0,n.bF)(b)]),t[1]||(t[1]=(0,n.Lk)("link",{href:"https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap",rel:"stylesheet"},null,-1))]),(0,n.Lk)("main",null,[(0,n.bF)(y)]),(0,n.Lk)("aside",i,[(0,n.Lk)("div",o,[(0,n.bF)(w,{to:"/"},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.Lk)("img",{src:"/images/logo.png",alt:"Logo",class:"logo"},null,-1)]))),_:1})]),(0,n.Lk)("nav",c,[(0,n.Lk)("ul",u,[(0,n.Lk)("li",null,[(0,n.bF)(w,{to:"/",class:"button"},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)("Главная")]))),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(w,{to:"/about",class:"button"},{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)("О нас")]))),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(w,{to:"/contact",class:"button"},{default:(0,n.k6)((()=>t[5]||(t[5]=[(0,n.eW)("Контакты")]))),_:1})]),f.isAuthenticated?((0,n.uX)(),(0,n.CE)("li",d,[(0,n.bF)(w,{to:"/repairs",class:"button"},{default:(0,n.k6)((()=>t[6]||(t[6]=[(0,n.eW)("Ремонты")]))),_:1})])):(0,n.Q3)("",!0),f.isAuthenticated?((0,n.uX)(),(0,n.CE)("li",p,[(0,n.bF)(w,{to:"/clients",class:"button"},{default:(0,n.k6)((()=>t[7]||(t[7]=[(0,n.eW)("Клиенты")]))),_:1})])):(0,n.Q3)("",!0),f.isAuthenticated?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("li",h,[(0,n.bF)(w,{to:"/login",class:"button"},{default:(0,n.k6)((()=>t[8]||(t[8]=[(0,n.eW)("Войти")]))),_:1})])),f.isAuthenticated?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("li",g,[(0,n.bF)(w,{to:"/register",class:"button"},{default:(0,n.k6)((()=>t[9]||(t[9]=[(0,n.eW)("Зарегистрироваться")]))),_:1})])),f.isAuthenticated?((0,n.uX)(),(0,n.CE)("li",k,[(0,n.Lk)("span",null,"Добро пожаловать, "+(0,r.v_)(f.username),1)])):(0,n.Q3)("",!0),f.isAuthenticated?((0,n.uX)(),(0,n.CE)("li",m,[(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>L.logout&&L.logout(...e)),class:"button"},"Выйти")])):(0,n.Q3)("",!0),f.isAuthenticated&&"admin"===f.role?((0,n.uX)(),(0,n.CE)("li",v,t[10]||(t[10]=[(0,n.Lk)("a",{href:"http://localhost:3000",class:"admin-button"},"Админ-панель",-1)]))):(0,n.Q3)("",!0)])])])],64)}a(4114);var L={data(){return{isAuthenticated:!1,username:"",role:""}},created(){this.checkAuth()},methods:{async checkAuth(){try{const e=await fetch("http://localhost:3000/auth/check",{method:"GET",credentials:"include"}),t=await e.json();e.ok?(this.isAuthenticated=!0,this.username=t.username||"Пользователь",this.role=t.role||""):(console.error("Токен недействителен:",t.message),this.isAuthenticated=!1,this.username="",this.role="")}catch(e){console.error("Ошибка проверки авторизации:",e),this.isAuthenticated=!1,this.username="",this.role=""}},async logout(){try{const e=await fetch("http://localhost:3000/auth/logout",{method:"GET",credentials:"include"});e.ok?(this.isAuthenticated=!1,this.username="",this.role="",this.$router.push("/")):console.error("Сервер вернул ошибку при выходе")}catch(e){console.error("Ошибка выхода:",e),this.isAuthenticated=!1,this.username="",this.role="",this.$router.push("/")}}}},b=a(1241);const y=(0,b.A)(L,[["render",f],["__scopeId","data-v-23859d9a"]]);var w=y,E=a(1387);const _={class:"fade-in"},x={class:"container"},C={class:"flex flex-col sm:flex-row gap-6 mb-10 justify-center"},P=["src","alt"],A={class:"card-body"},X={class:"text-xl font-bold text-center mb-3"},$={class:"card-text text-center"},T={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-12"},N={class:"content-block card fade-in",style:{animationDelay:"0.4s"}},W={class:"text-lg space-y-4"},j={class:"text-gray-600"};function S(e,t,a,s,l,i){return(0,n.uX)(),(0,n.CE)("main",_,[(0,n.Lk)("div",x,[t[3]||(t[3]=(0,n.Lk)("h1",{class:"page-title"},'Добро пожаловать в сервис "Мобилка"',-1)),t[4]||(t[4]=(0,n.Lk)("p",{class:"fs-5 text-center mb-10 italic",align:"center"},"Быстро. Качественно. Надежно.",-1)),(0,n.Lk)("div",C,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.services,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"image-block-centered card fade-in",key:t,style:(0,r.Tr)({animationDelay:.2*t+"s"})},[(0,n.Lk)("img",{src:e.image,alt:e.name,class:"img-block h-48 w-full object-cover"},null,8,P),(0,n.Lk)("div",A,[(0,n.Lk)("h5",X,(0,r.v_)(e.name),1),(0,n.Lk)("p",$,(0,r.v_)(e.description),1)])],4)))),128))]),(0,n.Lk)("div",T,[t[2]||(t[2]=(0,n.Lk)("div",{class:"content-block card fade-in",style:{animationDelay:"0.2s"}},[(0,n.Lk)("h4",{class:"text-2xl font-bold mb-4"},"О сервисе"),(0,n.Lk)("p",{class:"text-gray-600"},' Сервис "Мобилка" — это команда опытных мастеров, которые занимаются ремонтом мобильных телефонов уже более 8 лет. Мы работаем честно и быстро. '),(0,n.Lk)("p",{class:"text-gray-600"}," У нас вы можете починить телефон любой марки: iPhone, Samsung, Xiaomi, Huawei и другие. Все работы выполняются с гарантией. ")],-1)),(0,n.Lk)("div",N,[t[1]||(t[1]=(0,n.Lk)("h4",{class:"text-2xl font-bold mb-4"},"Почему мы?",-1)),(0,n.Lk)("ul",W,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.reasons,((e,a)=>((0,n.uX)(),(0,n.CE)("li",{class:"flex items-center bg-white bg-opacity-20 p-3 rounded-lg fade-in",key:a,style:(0,r.Tr)({animationDelay:.2*(a+1)+"s"})},[t[0]||(t[0]=(0,n.Lk)("span",{class:"text-green-500 mr-3 text-2xl"},"✅",-1)),(0,n.Lk)("span",j,(0,r.v_)(e),1)],4)))),128))])])])])])}a(8111),a(7588);var F={name:"HomePage",data(){return{services:[{name:"Замена экрана",description:"Профессиональная замена дисплеев на iPhone, Samsung и другие смартфоны. Гарантия качества и оригинальные запчасти.",image:"/images/1.png"},{name:"Поломка платы",description:"Диагностика и ремонт материнских плат. Работаем с популярными моделями. Срок ремонта от 1 дня.",image:"/images/2.png"},{name:"Замена батареи",description:"Быстрая замена аккумулятора. Используем качественные аналоги и оригиналы. Услуга доступна почти для всех моделей.",image:"/images/3.png"}],reasons:["Быстрый ремонт","Гарантия на все услуги","Только качественные запчасти","Приемлемые цены","Диагностика бесплатно"]}},mounted(){this.$el.querySelectorAll(".fade-in").forEach(((e,t)=>{setTimeout((()=>{e.style.opacity="1",e.style.transform="translateY(0)"}),200*t)}))}};const I=(0,b.A)(F,[["render",S]]);var O=I;const Q={class:"fade-in"},U={class:"container"},M={class:"content-block",ref:"block1"},D={class:"content-block",ref:"block2"};function R(e,t,a,s,r,l){return(0,n.uX)(),(0,n.CE)("main",Q,[(0,n.Lk)("div",U,[t[2]||(t[2]=(0,n.Lk)("h1",{class:"page-title"},"Ремонт телефонов",-1)),t[3]||(t[3]=(0,n.Lk)("p",{class:"fs-5 text-center mb-10 italic"},"Быстро. Качественно. Надежно.",-1)),(0,n.Lk)("div",M,t[0]||(t[0]=[(0,n.Lk)("div",{class:"text-block"},[(0,n.Lk)("h2",{class:"text-2xl font-bold mb-4"},'Добро пожаловать в сервис "Мобилка"'),(0,n.Lk)("p",{class:"fs-5"}," Мы специализируемся на ремонте смартфонов всех популярных брендов: iPhone, Samsung, Xiaomi, Huawei и другие. Наши мастера выполнят диагностику и ремонт вашего устройства быстро и качественно. ")],-1)]),512),(0,n.Lk)("div",D,t[1]||(t[1]=[(0,n.Fv)('<div class="text-block"><h2 class="text-2xl font-bold mb-4 text-center">Наши работы</h2></div><div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"><div class="image-block photo-card fade-in" style="animation-delay:0.2s;"><img src="/images/11.png" alt="Замена экрана" class="img-block"><div class="text-center pt-4"><span class="text-gray-600">Замена экрана</span></div></div><div class="image-block photo-card fade-in" style="animation-delay:0.4s;"><img src="/images/22.png" alt="Замена батареи" class="img-block"><div class="text-center pt-4"><span class="text-gray-600">Замена аккумулятора</span></div></div><div class="image-block photo-card fade-in" style="animation-delay:0.6s;"><img src="/images/33.png" alt="Поломка платы" class="img-block"><div class="text-center pt-4"><span class="text-gray-600">Ремонт материнской платы</span></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6 justify-center"><div class="image-block photo-card fade-in" style="animation-delay:0.8s;"><img src="/images/44.png" alt="Камера" class="img-block"><div class="text-center pt-4"><span class="text-gray-600">Ремонт камеры</span></div></div><div class="image-block photo-card fade-in" style="animation-delay:1.0s;"><img src="/images/55.png" alt="Микрофон" class="img-block"><div class="text-center pt-4"><span class="text-gray-600">Ремонт микрофона / динамика</span></div></div></div>',3)]),512)])])}var q={name:"AboutPage",mounted(){this.$el.querySelectorAll(".fade-in").forEach(((e,t)=>{setTimeout((()=>{e.style.opacity="1",e.style.transform="translateY(0)"}),200*t)}))}};const H=(0,b.A)(q,[["render",R]]);var G=H;const J={class:"fade-in"},V={class:"container"},K={class:"mb-12"},z={class:"employees-row"},Z={class:"card"},Y=["src","alt"],B={class:"card-body"},ee={class:"card-title"},te={class:"card-text"};function ae(e,t,a,s,l,i){return(0,n.uX)(),(0,n.CE)("main",J,[(0,n.Lk)("div",V,[t[1]||(t[1]=(0,n.Fv)('<h1 class="page-title">Наша команда</h1><div class="content-block fade-in mb-12"><div class="text-block"><h2 class="text-2xl font-bold text-center mb-4">О нашем сервисе</h2><p class="fs-5 text-center"> Сервис &quot;Мобилка&quot; — это место, где вы можете быстро и качественно отремонтировать свой смартфон. Мы работаем с iPhone, Samsung, Xiaomi, Huawei и другими популярными брендами. У нас только опытные мастера и проверенные запчасти. </p></div></div>',2)),(0,n.Lk)("div",K,[t[0]||(t[0]=(0,n.Lk)("h2",{class:"text-2xl font-bold text-center mb-6"},"Наши сотрудники",-1)),(0,n.Lk)("div",z,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.employees,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:(0,r.C4)(["employee-card photo-card",{"fade-in":!0}]),key:t,style:(0,r.Tr)({animationDelay:.2*t+"s"})},[(0,n.Lk)("div",Z,[(0,n.Lk)("img",{src:e.image,alt:e.name,class:"card-img-top"},null,8,Y),(0,n.Lk)("div",B,[(0,n.Lk)("h3",ee,(0,r.v_)(e.name),1),(0,n.Lk)("p",te,(0,r.v_)(e.role),1)])])],4)))),128))])]),t[2]||(t[2]=(0,n.Fv)('<div class="content-block fade-in"><div class="text-block"><h2 class="text-2xl font-bold text-center mb-6">Наши услуги</h2></div><div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="text-center fade-in" style="animation-delay:0.2s;"><h3 class="text-xl font-bold mb-2">+ Диагностика</h3><p class="text-gray-600">Бесплатная диагностика неисправностей.</p></div><div class="text-center fade-in" style="animation-delay:0.4s;"><h3 class="text-xl font-bold mb-2">+ Экраны и дисплеи</h3><p class="text-gray-600">Замена стекла, тачскринов и дисплеев любой сложности.</p></div><div class="text-center fade-in" style="animation-delay:0.6s;"><h3 class="text-xl font-bold mb-2">+ Аккумуляторы</h3><p class="text-gray-600">Замена и восстановление аккумуляторов на всех моделях.</p></div></div></div>',1))])])}var se={name:"ContactPage",data(){return{employees:[{name:"Иванов Алексей Сергеевич",role:"Ведущий мастер по ремонту",image:"/images/t1.jpg"},{name:"Петрова Марина Викторовна",role:"Специалист по диагностике",image:"/images/t5.jpg"},{name:"Сидоров Дмитрий Иванович",role:"Техник по ремонту плат",image:"/images/t3.jpg"},{name:"Козлов Андрей Юрьевич",role:"Менеджер по работе с клиентами",image:"/images/t4.jpg"},{name:"Морозов Павел Николаевич",role:"Специалист по замене компонентов",image:"/images/t2.jpg"},{name:"Глебова Ольга Петровна",role:"Администратор сервиса",image:"/images/t6.jpg"}]}},mounted(){this.$el.querySelectorAll(".fade-in").forEach(((e,t)=>{setTimeout((()=>{e.style.opacity="1",e.style.transform="translateY(0)"}),200*t)}))}};const ne=(0,b.A)(se,[["render",ae]]);var re=ne;const le={class:"app-container"},ie={style:{"text-align":"center","margin-bottom":"20px"}},oe={class:"table-container"},ce={class:"styled-table clients-table"},ue=["src"],de={key:1},pe={class:"action-buttons"},he={key:0,class:"no-data"},ge={key:1,class:"pagination"},ke=["disabled"],me=["disabled"];function ve(e,t,a,s,l,i){const o=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",null,[t[6]||(t[6]=(0,n.Lk)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css",integrity:"sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==",crossorigin:"anonymous",referrerpolicy:"no-referrer"},null,-1)),(0,n.Lk)("div",le,[t[5]||(t[5]=(0,n.Lk)("h1",{class:"page-title"},"Список клиентов",-1)),(0,n.Lk)("div",ie,[(0,n.bF)(o,{to:"/clients/create",class:"btn-primary"},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)("Добавить клиента")]))),_:1})]),(0,n.Lk)("div",oe,[(0,n.Lk)("table",ce,[t[4]||(t[4]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"ID"),(0,n.Lk)("th",null,"Имя"),(0,n.Lk)("th",null,"Фамилия"),(0,n.Lk)("th",null,"Телефон"),(0,n.Lk)("th",null,"Email"),(0,n.Lk)("th",null,"Адрес"),(0,n.Lk)("th",null,[(0,n.eW)("Дата"),(0,n.Lk)("br"),(0,n.eW)("рождения")]),(0,n.Lk)("th",null,"Заметки"),(0,n.Lk)("th",null,"Фото"),(0,n.Lk)("th",null,"Действия")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.clients,((e,a)=>((0,n.uX)(),(0,n.CE)("tr",{key:e.id},[(0,n.Lk)("td",null,(0,r.v_)((l.currentPage-1)*l.pageSize+a+1),1),(0,n.Lk)("td",null,(0,r.v_)(e.first_name||"N/A"),1),(0,n.Lk)("td",null,(0,r.v_)(e.last_name||"N/A"),1),(0,n.Lk)("td",null,(0,r.v_)(e.phone||"N/A"),1),(0,n.Lk)("td",null,(0,r.v_)(e.email||"N/A"),1),(0,n.Lk)("td",null,(0,r.v_)(e.address||"N/A"),1),(0,n.Lk)("td",null,(0,r.v_)(e.birth_date||"N/A"),1),(0,n.Lk)("td",null,(0,r.v_)(e.notes||"N/A"),1),(0,n.Lk)("td",null,[e.photo?((0,n.uX)(),(0,n.CE)("img",{key:0,src:`${l.backendUrl}${e.photo.replace("/img/","/images/")}`,alt:"Client Photo",class:"product-image"},null,8,ue)):((0,n.uX)(),(0,n.CE)("span",de,"N/A"))]),(0,n.Lk)("td",null,[(0,n.Lk)("div",pe,[(0,n.bF)(o,{to:`/clients/view/${e.id}`,class:"action-btn view-icon"},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.Lk)("i",{class:"fas fa-eye"},null,-1)]))),_:2},1032,["to"])])])])))),128))])]),l.clients.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("p",he,"Нет клиентов")),l.totalPages>1?((0,n.uX)(),(0,n.CE)("div",ge,[(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.prevPage&&i.prevPage(...e)),disabled:1===l.currentPage},"← Предыдущая",8,ke),(0,n.Lk)("span",null,"Страница "+(0,r.v_)(l.currentPage)+" из "+(0,r.v_)(l.totalPages),1),(0,n.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.nextPage&&i.nextPage(...e)),disabled:l.currentPage===l.totalPages},"Следующая →",8,me)])):(0,n.Q3)("",!0)])])])}var fe={data(){return{clients:[],currentPage:1,totalPages:0,pageSize:10,backendUrl:"http://localhost:3000"}},async created(){await this.fetchClients()},methods:{async fetchClients(){try{const e=await fetch(`${this.backendUrl}/api/clients?page=${this.currentPage}`,{method:"GET",credentials:"include"});if(!e.ok){if(401===e.status)return void this.$router.push("/login");throw new Error(`HTTP error! Status: ${e.status}`)}const t=await e.json();this.clients=t.clients||[],this.totalPages=t.totalPages||0,this.currentPage=t.currentPage||1}catch(e){console.error("Error fetching clients:",e),this.clients=[],this.totalPages=0}},async prevPage(){this.currentPage>1&&(this.currentPage--,await this.fetchClients())},async nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,await this.fetchClients())},async deleteClient(e){if(confirm("Вы уверены, что хотите удалить этого клиента?"))try{const t=await fetch(`${this.backendUrl}/delete-client/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);await this.fetchClients()}catch(t){console.error("Error deleting client:",t),alert(`Ошибка: ${t.message}`)}}}};const Le=(0,b.A)(fe,[["render",ve],["__scopeId","data-v-705129c6"]]);var be=Le;const ye={class:"app-container"},we={style:{"text-align":"center","margin-bottom":"20px"}},Ee={class:"table-container"},_e={class:"styled-table repairs-table"},xe=["src"],Ce={key:1},Pe={class:"action-buttons"},Ae={key:0,class:"no-data"},Xe={key:1,class:"pagination"},$e=["disabled"],Te=["disabled"];function Ne(e,t,a,s,l,i){const o=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",null,[t[6]||(t[6]=(0,n.Lk)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css",integrity:"sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==",crossorigin:"anonymous",referrerpolicy:"no-referrer"},null,-1)),(0,n.Lk)("div",ye,[t[5]||(t[5]=(0,n.Lk)("h1",{class:"page-title"},"Список ремонтов",-1)),(0,n.Lk)("div",we,[(0,n.bF)(o,{to:"/repairs/create",class:"btn-primary"},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)("Добавить ремонт")]))),_:1})]),(0,n.Lk)("div",Ee,[(0,n.Lk)("table",_e,[t[4]||(t[4]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"ID"),(0,n.Lk)("th",null,"Тип устройства"),(0,n.Lk)("th",null,"Бренд"),(0,n.Lk)("th",null,"Модель"),(0,n.Lk)("th",null,"Описание проблемы"),(0,n.Lk)("th",null,"Стоимость ремонта"),(0,n.Lk)("th",null,"Статус"),(0,n.Lk)("th",null,"Дата"),(0,n.Lk)("th",null,"Фото"),(0,n.Lk)("th",null,"Действия")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.repairs,((e,a)=>((0,n.uX)(),(0,n.CE)("tr",{key:e.id},[(0,n.Lk)("td",null,(0,r.v_)((l.currentPage-1)*l.pageSize+a+1),1),(0,n.Lk)("td",null,(0,r.v_)(e.device_type||"N/A"),1),(0,n.Lk)("td",null,(0,r.v_)(e.device_brand||"N/A"),1),(0,n.Lk)("td",null,(0,r.v_)(e.device_model||"N/A"),1),(0,n.Lk)("td",null,(0,r.v_)(e.issue_description||"N/A"),1),(0,n.Lk)("td",null,(0,r.v_)(e.repair_cost?`${e.repair_cost} ₽`:"N/A"),1),(0,n.Lk)("td",null,[(0,n.Lk)("span",{class:(0,r.C4)(["status",i.getStatusClass(e.status)])},(0,r.v_)(e.status||"N/A"),3)]),(0,n.Lk)("td",null,(0,r.v_)(e.date||"N/A"),1),(0,n.Lk)("td",null,[e.photo?((0,n.uX)(),(0,n.CE)("img",{key:0,src:`${l.backendUrl}${e.photo.replace("/img/","/images/")}`,alt:"Repair Photo",class:"product-image"},null,8,xe)):((0,n.uX)(),(0,n.CE)("span",Ce,"N/A"))]),(0,n.Lk)("td",null,[(0,n.Lk)("div",Pe,[(0,n.bF)(o,{to:`/repairs/view/${e.id}`,class:"action-btn view-icon"},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.Lk)("i",{class:"fas fa-eye"},null,-1)]))),_:2},1032,["to"])])])])))),128))])]),l.repairs.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("p",Ae,"Нет ремонтов")),l.totalPages>1?((0,n.uX)(),(0,n.CE)("div",Xe,[(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.prevPage&&i.prevPage(...e)),disabled:1===l.currentPage},"← Предыдущая",8,$e),(0,n.Lk)("span",null,"Страница "+(0,r.v_)(l.currentPage)+" из "+(0,r.v_)(l.totalPages),1),(0,n.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.nextPage&&i.nextPage(...e)),disabled:l.currentPage===l.totalPages},"Следующая →",8,Te)])):(0,n.Q3)("",!0)])])])}var We={data(){return{repairs:[],currentPage:1,totalPages:0,pageSize:10,backendUrl:"http://localhost:3000"}},async created(){await this.fetchRepairs()},methods:{async fetchRepairs(){try{const e=await fetch(`${this.backendUrl}/api/repairs?page=${this.currentPage}`,{method:"GET",credentials:"include"});if(!e.ok){if(401===e.status)return void this.$router.push("/login");throw new Error(`HTTP error! Status: ${e.status}`)}const t=await e.json();this.repairs=t.repairs||[],this.totalPages=t.totalPages||0,this.currentPage=t.currentPage||1}catch(e){console.error("Error fetching repairs:",e),this.repairs=[],this.totalPages=0}},async prevPage(){this.currentPage>1&&(this.currentPage--,await this.fetchRepairs())},async nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,await this.fetchRepairs())},async deleteRepair(e){if(confirm("Вы уверены, что хотите удалить этот ремонт?"))try{const t=await fetch(`${this.backendUrl}/delete-repair/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);await this.fetchRepairs()}catch(t){console.error("Error deleting repair:",t),alert(`Ошибка: ${t.message}`)}},getStatusClass(e){switch(e){case"В ожидании":return"pending";case"В ремонте":return"in-progress";case"Завершен":return"completed";case"Отменен":return"cancelled";case"В ожидании на удалёнке":return"on-remote";default:return"pending"}}}};const je=(0,b.A)(We,[["render",Ne],["__scopeId","data-v-4586e1cd"]]);var Se=je;const Fe={class:"container"},Ie={class:"form-group"},Oe={class:"form-group"},Qe={key:0,class:"error"};function Ue(e,t,a,l,i,o){return(0,n.uX)(),(0,n.CE)("div",Fe,[t[6]||(t[6]=(0,n.Lk)("h2",null,"Вход",-1)),(0,n.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>o.login&&o.login(...e)),["prevent"]))},[(0,n.Lk)("div",Ie,[t[3]||(t[3]=(0,n.Lk)("label",{for:"email"},"Email:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e),required:"",class:"form-input"},null,512),[[s.Jo,i.email]])]),(0,n.Lk)("div",Oe,[t[4]||(t[4]=(0,n.Lk)("label",{for:"password"},"Пароль:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),required:"",class:"form-input"},null,512),[[s.Jo,i.password]])]),t[5]||(t[5]=(0,n.Lk)("button",{type:"submit",class:"btn btn-primary"},"Войти",-1)),i.error?((0,n.uX)(),(0,n.CE)("p",Qe,(0,r.v_)(i.error),1)):(0,n.Q3)("",!0)],32)])}var Me={data(){return{email:"",password:"",error:""}},methods:{async login(){try{console.log("Logging in with data:",{email:this.email,password:this.password});const e=await fetch("http://localhost:3000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:this.email,password:this.password})}),t=await e.json();console.log("Login response:",t),e.ok?(localStorage.setItem("token",t.token),this.$router.push("/"),setTimeout((()=>{location.reload()}),500)):this.error=t.message||"Ошибка входа"}catch(e){console.error("Error during login:",e),this.error="Ошибка сервера"}}}};const De=(0,b.A)(Me,[["render",Ue],["__scopeId","data-v-0c964ea8"]]);var Re=De;const qe={class:"container"},He={class:"form-group"},Ge={class:"form-group"},Je={class:"form-group"},Ve={key:0,class:"error"};function Ke(e,t,a,l,i,o){return(0,n.uX)(),(0,n.CE)("div",qe,[t[8]||(t[8]=(0,n.Lk)("h2",null,"Регистрация",-1)),(0,n.Lk)("form",{onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>o.register&&o.register(...e)),["prevent"]))},[(0,n.Lk)("div",He,[t[4]||(t[4]=(0,n.Lk)("label",{for:"username"},"Имя пользователя:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),required:"",class:"form-input"},null,512),[[s.Jo,i.username]])]),(0,n.Lk)("div",Ge,[t[5]||(t[5]=(0,n.Lk)("label",{for:"email"},"Email:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>i.email=e),required:"",class:"form-input"},null,512),[[s.Jo,i.email]])]),(0,n.Lk)("div",Je,[t[6]||(t[6]=(0,n.Lk)("label",{for:"password"},"Пароль:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[2]||(t[2]=e=>i.password=e),required:"",class:"form-input"},null,512),[[s.Jo,i.password]])]),t[7]||(t[7]=(0,n.Lk)("button",{type:"submit",class:"btn btn-primary"},"Зарегистрироваться",-1)),i.error?((0,n.uX)(),(0,n.CE)("p",Ve,(0,r.v_)(i.error),1)):(0,n.Q3)("",!0)],32)])}var ze={data(){return{username:"",email:"",password:"",error:""}},methods:{async register(){try{console.log("Registering user with data:",{username:this.username,email:this.email,password:this.password});const e=await fetch("http://localhost:3000/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,email:this.email,password:this.password})}),t=await e.json();console.log("Registration response:",t),e.ok?this.$router.push("/login"):this.error=t.message||"Ошибка регистрации"}catch(e){console.error("Error during registration:",e),this.error="Ошибка сервера"}}}};const Ze=(0,b.A)(ze,[["render",Ke],["__scopeId","data-v-4c6411a6"]]);var Ye=Ze;const Be={class:"app-container"},et={key:0,class:"loading-message"},tt={key:1,class:"error-message"},at={key:2,class:"client-details"},st={class:"product-image-container"},nt=["src"],rt={key:1},lt={class:"client-info"},it={class:"action-buttons"},ot={key:3,class:"error-message"};function ct(e,t,a,s,l,i){return(0,n.uX)(),(0,n.CE)("div",Be,[t[8]||(t[8]=(0,n.Lk)("h1",{class:"page-title"},"Просмотр клиента",-1)),l.loading?((0,n.uX)(),(0,n.CE)("div",et,"Загрузка данных...")):l.errorMessage?((0,n.uX)(),(0,n.CE)("div",tt,(0,r.v_)(l.errorMessage),1)):l.client?((0,n.uX)(),(0,n.CE)("div",at,[(0,n.Lk)("div",st,[l.client.photo?((0,n.uX)(),(0,n.CE)("img",{key:0,src:`${l.backendUrl}${l.client.photo.replace("/img/","/images/")}`,alt:"Client Photo",class:"product-image"},null,8,nt)):((0,n.uX)(),(0,n.CE)("span",rt,"Нет изображения"))]),(0,n.Lk)("div",lt,[(0,n.Lk)("p",null,[t[1]||(t[1]=(0,n.Lk)("strong",null,"Имя:",-1)),(0,n.eW)(" "+(0,r.v_)(l.client.first_name||"N/A"),1)]),(0,n.Lk)("p",null,[t[2]||(t[2]=(0,n.Lk)("strong",null,"Фамилия:",-1)),(0,n.eW)(" "+(0,r.v_)(l.client.last_name||"N/A"),1)]),(0,n.Lk)("p",null,[t[3]||(t[3]=(0,n.Lk)("strong",null,"Телефон:",-1)),(0,n.eW)(" "+(0,r.v_)(l.client.phone||"N/A"),1)]),(0,n.Lk)("p",null,[t[4]||(t[4]=(0,n.Lk)("strong",null,"Email:",-1)),(0,n.eW)(" "+(0,r.v_)(l.client.email||"N/A"),1)]),(0,n.Lk)("p",null,[t[5]||(t[5]=(0,n.Lk)("strong",null,"Адрес:",-1)),(0,n.eW)(" "+(0,r.v_)(l.client.address||"N/A"),1)]),(0,n.Lk)("p",null,[t[6]||(t[6]=(0,n.Lk)("strong",null,"Дата рождения:",-1)),(0,n.eW)(" "+(0,r.v_)(l.client.birth_date||"N/A"),1)]),(0,n.Lk)("p",null,[t[7]||(t[7]=(0,n.Lk)("strong",null,"Заметки:",-1)),(0,n.eW)(" "+(0,r.v_)(l.client.notes||"N/A"),1)])]),(0,n.Lk)("div",it,[(0,n.Lk)("button",{class:"btn-secondary",onClick:t[0]||(t[0]=t=>e.$router.push("/clients"))},"Вернуться к списку")])])):((0,n.uX)(),(0,n.CE)("div",ot,"Не удалось загрузить данные о клиенте."))])}var ut={data(){return{client:null,loading:!0,errorMessage:null,backendUrl:"http://localhost:3000"}},async created(){const e=this.$route.params.id;if(!/^\d+$/.test(e))return this.errorMessage="Некорректный ID",void(this.loading=!1);await this.fetchClient(e)},methods:{async fetchClient(e){try{const t=await fetch(`${this.backendUrl}/api/view-client/${e}`,{method:"GET",credentials:"include"});if(!t.ok){if(401===t.status)return void this.$router.push("/login");if(404===t.status)throw new Error("Клиент не найден");throw new Error(`HTTP error! Status: ${t.status}`)}const a=await t.json();this.client=a}catch(t){console.error("Ошибка при получении данных клиента:",t),this.errorMessage=t.message}finally{this.loading=!1}}}};const dt=(0,b.A)(ut,[["render",ct],["__scopeId","data-v-30e7c5d4"]]);var pt=dt;const ht={class:"app-container"},gt={key:0,class:"loading-message"},kt={key:1,class:"error-message"},mt={key:2,class:"repair-details"},vt={class:"product-image-container"},ft=["src"],Lt={key:1},bt={class:"repair-info"},yt={class:"action-buttons"},wt={key:3,class:"error-message"};function Et(e,t,a,s,l,i){return(0,n.uX)(),(0,n.CE)("div",ht,[t[8]||(t[8]=(0,n.Lk)("h1",{class:"page-title"},"Просмотр ремонта",-1)),l.loading?((0,n.uX)(),(0,n.CE)("div",gt,"Загрузка данных...")):l.errorMessage?((0,n.uX)(),(0,n.CE)("div",kt,(0,r.v_)(l.errorMessage),1)):l.repair?((0,n.uX)(),(0,n.CE)("div",mt,[(0,n.Lk)("div",vt,[l.repair.photo?((0,n.uX)(),(0,n.CE)("img",{key:0,src:`${l.backendUrl}${l.repair.photo.replace("/img/","/images/")}`,alt:"Repair Photo",class:"product-image"},null,8,ft)):((0,n.uX)(),(0,n.CE)("span",Lt,"Нет изображения"))]),(0,n.Lk)("div",bt,[(0,n.Lk)("p",null,[t[1]||(t[1]=(0,n.Lk)("strong",null,"Тип устройства:",-1)),(0,n.eW)(" "+(0,r.v_)(l.repair.device_type||"N/A"),1)]),(0,n.Lk)("p",null,[t[2]||(t[2]=(0,n.Lk)("strong",null,"Бренд:",-1)),(0,n.eW)(" "+(0,r.v_)(l.repair.device_brand||"N/A"),1)]),(0,n.Lk)("p",null,[t[3]||(t[3]=(0,n.Lk)("strong",null,"Модель:",-1)),(0,n.eW)(" "+(0,r.v_)(l.repair.device_model||"N/A"),1)]),(0,n.Lk)("p",null,[t[4]||(t[4]=(0,n.Lk)("strong",null,"Описание проблемы:",-1)),(0,n.eW)(" "+(0,r.v_)(l.repair.issue_description||"N/A"),1)]),(0,n.Lk)("p",null,[t[5]||(t[5]=(0,n.Lk)("strong",null,"Стоимость ремонта:",-1)),(0,n.eW)(" "+(0,r.v_)(l.repair.repair_cost||"N/A"),1)]),(0,n.Lk)("p",null,[t[6]||(t[6]=(0,n.Lk)("strong",null,"Статус:",-1)),(0,n.Lk)("span",{class:(0,r.C4)(["status",i.getStatusClass(l.repair.status)])},(0,r.v_)(l.repair.status||"N/A"),3)]),(0,n.Lk)("p",null,[t[7]||(t[7]=(0,n.Lk)("strong",null,"Дата:",-1)),(0,n.eW)(" "+(0,r.v_)(l.repair.date||"N/A"),1)])]),(0,n.Lk)("div",yt,[(0,n.Lk)("button",{class:"btn-secondary",onClick:t[0]||(t[0]=t=>e.$router.push("/repairs"))},"Вернуться к списку")])])):((0,n.uX)(),(0,n.CE)("div",wt,"Не удалось загрузить данные о ремонте."))])}var _t={data(){return{repair:null,loading:!0,errorMessage:null,backendUrl:"http://localhost:3000"}},async created(){const e=this.$route.params.id;if(!/^\d+$/.test(e))return this.errorMessage="Некорректный ID",void(this.loading=!1);await this.fetchRepair(e)},methods:{async fetchRepair(e){try{const t=await fetch(`${this.backendUrl}/api/view-repair/${e}`,{method:"GET",credentials:"include"});if(!t.ok){if(401===t.status)return void this.$router.push("/login");if(404===t.status)throw new Error("Ремонт не найден");throw new Error(`HTTP error! Status: ${t.status}`)}const a=await t.json();this.repair=a}catch(t){console.error("Ошибка при получении данных ремонта:",t),this.errorMessage=t.message}finally{this.loading=!1}},getStatusClass(e){switch(e){case"В ожидании":return"pending";case"В ремонте":return"in-progress";case"Завершен":return"completed";case"Отменен":return"cancelled";case"В ожидании на удалёнке":return"on-remote";default:return"pending"}}}};const xt=(0,b.A)(_t,[["render",Et],["__scopeId","data-v-6d3615d6"]]);var Ct=xt;const Pt=[{path:"/",component:O},{path:"/about",component:G},{path:"/contact",component:re},{path:"/clients",component:be},{path:"/repairs",component:Se},{path:"/login",component:Re},{path:"/register",component:Ye},{path:"/view-client/:id",component:pt},{path:"/view-repair/:id",component:Ct}],At=(0,E.aE)({history:(0,E.LA)(),routes:Pt});var Xt=At;const $t=(0,s.Ef)(w);$t.use(Xt),$t.mount("#app")}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,s,n,r){if(!s){var l=1/0;for(u=0;u<e.length;u++){s=e[u][0],n=e[u][1],r=e[u][2];for(var i=!0,o=0;o<s.length;o++)(!1&r||l>=r)&&Object.keys(a.O).every((function(e){return a.O[e](s[o])}))?s.splice(o--,1):(i=!1,r<l&&(l=r));if(i){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[s,n,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,r,l=s[0],i=s[1],o=s[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(o)var u=o(a)}for(t&&t(s);c<l.length;c++)r=l[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},s=self["webpackChunkvueapp"]=self["webpackChunkvueapp"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(1885)}));s=a.O(s)})();
//# sourceMappingURL=app.b1bf20ad.js.map