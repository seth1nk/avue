{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"wrapper\"\n};\nconst _hoisted_2 = {\n  class: \"right-panel\"\n};\nconst _hoisted_3 = {\n  class: \"logo-container\"\n};\nconst _hoisted_4 = {\n  class: \"nav-buttons\"\n};\nconst _hoisted_5 = {\n  class: \"button-list\"\n};\nconst _hoisted_6 = {\n  key: 0\n};\nconst _hoisted_7 = {\n  key: 1\n};\nconst _hoisted_8 = {\n  key: 2\n};\nconst _hoisted_9 = {\n  key: 3\n};\nconst _hoisted_10 = {\n  key: 4,\n  class: \"welcome-message\"\n};\nconst _hoisted_11 = {\n  key: 5\n};\nconst _hoisted_12 = {\n  key: 6\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_view = _resolveComponent(\"router-view\");\n  const _component_TheWelcome = _resolveComponent(\"TheWelcome\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"header\", null, [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_router_view)]), _cache[1] || (_cache[1] = _createElementVNode(\"link\", {\n    href: \"https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap\",\n    rel: \"stylesheet\"\n  }, null, -1))]), _createElementVNode(\"main\", null, [_createVNode(_component_TheWelcome)]), _createElementVNode(\"aside\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_router_link, {\n    to: \"/\"\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createElementVNode(\"img\", {\n      src: \"/images/logo.png\",\n      alt: \"Logo\",\n      class: \"logo\"\n    }, null, -1)])),\n    _: 1\n  })]), _createElementVNode(\"nav\", _hoisted_4, [_createElementVNode(\"ul\", _hoisted_5, [_createElementVNode(\"li\", null, [_createVNode(_component_router_link, {\n    to: \"/\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"Главная\")])),\n    _: 1\n  })]), _createElementVNode(\"li\", null, [_createVNode(_component_router_link, {\n    to: \"/about\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"О нас\")])),\n    _: 1\n  })]), _createElementVNode(\"li\", null, [_createVNode(_component_router_link, {\n    to: \"/contact\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"Контакты\")])),\n    _: 1\n  })]), $data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_6, [_createVNode(_component_router_link, {\n    to: \"/pets\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"Питомцы\")])),\n    _: 1\n  })])) : _createCommentVNode(\"\", true), $data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_7, [_createVNode(_component_router_link, {\n    to: \"/pitanie\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\"Питание\")])),\n    _: 1\n  })])) : _createCommentVNode(\"\", true), !$data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_8, [_createVNode(_component_router_link, {\n    to: \"/login\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[8] || (_cache[8] = [_createTextVNode(\"Войти\")])),\n    _: 1\n  })])) : _createCommentVNode(\"\", true), !$data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_9, [_createVNode(_component_router_link, {\n    to: \"/register\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[9] || (_cache[9] = [_createTextVNode(\"Зарегистрироваться\")])),\n    _: 1\n  })])) : _createCommentVNode(\"\", true), $data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_10, [_createElementVNode(\"span\", null, \"Добро пожаловать, \" + _toDisplayString($data.username), 1)])) : _createCommentVNode(\"\", true), $data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_11, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.logout && $options.logout(...args)),\n    class: \"button\"\n  }, \"Выйти\")])) : _createCommentVNode(\"\", true), $data.isAuthenticated && $data.role === 'admin' ? (_openBlock(), _createElementBlock(\"li\", _hoisted_12, _cache[10] || (_cache[10] = [_createElementVNode(\"a\", {\n    href: \"http://localhost:3000\",\n    class: \"admin-button\"\n  }, \"Админ-панель\", -1)]))) : _createCommentVNode(\"\", true)])])])], 64);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_createVNode","_component_router_view","href","rel","_component_TheWelcome","_hoisted_2","_hoisted_3","_component_router_link","to","default","_withCtx","_cache","src","alt","_","_hoisted_4","_hoisted_5","_createTextVNode","$data","isAuthenticated","_hoisted_6","_createCommentVNode","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","username","_hoisted_11","onClick","args","$options","logout","role","_hoisted_12"],"sources":["/home/vas/server/vueapp/src/App.vue"],"sourcesContent":["<template>\n  <header>\n    <div class=\"wrapper\">\n      <router-view></router-view>\n    </div>\n    <link href=\"https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap\" rel=\"stylesheet\">\n  </header>\n  <main>\n    <TheWelcome />\n  </main>\n  <!-- Правая панель -->\n  <aside class=\"right-panel\">\n    <div class=\"logo-container\">\n      <router-link to=\"/\">\n        <img src=\"/images/logo.png\" alt=\"Logo\" class=\"logo\" />\n      </router-link>\n    </div>\n    <nav class=\"nav-buttons\">\n      <ul class=\"button-list\">\n        <li>\n          <router-link to=\"/\" class=\"button\">Главная</router-link>\n        </li>\n        <li>\n          <router-link to=\"/about\" class=\"button\">О нас</router-link>\n        </li>\n        <li>\n          <router-link to=\"/contact\" class=\"button\">Контакты</router-link>\n        </li>\n        <li v-if=\"isAuthenticated\">\n          <router-link to=\"/pets\" class=\"button\">Питомцы</router-link>\n        </li>\n        <li v-if=\"isAuthenticated\">\n          <router-link to=\"/pitanie\" class=\"button\">Питание</router-link>\n        </li>\n        <li v-if=\"!isAuthenticated\">\n          <router-link to=\"/login\" class=\"button\">Войти</router-link>\n        </li>\n        <li v-if=\"!isAuthenticated\">\n          <router-link to=\"/register\" class=\"button\">Зарегистрироваться</router-link>\n        </li>\n        <li v-if=\"isAuthenticated\" class=\"welcome-message\">\n          <span>Добро пожаловать, {{ username }}</span>\n        </li>\n        <li v-if=\"isAuthenticated\">\n          <button @click=\"logout\" class=\"button\">Выйти</button>\n        </li>\n        <li v-if=\"isAuthenticated && role === 'admin'\">\n          <a href=\"http://localhost:3000\" class=\"admin-button\">Админ-панель</a>\n        </li>\n      </ul>\n    </nav>\n  </aside>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      isAuthenticated: false,\n      username: '',\n      role: ''\n    };\n  },\n  created() {\n    this.checkAuth();\n  },\n  methods: {\n    async checkAuth() {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        this.isAuthenticated = false;\n        this.username = '';\n        this.role = '';\n        return;\n      }\n\n      try {\n        const response = await fetch('http://localhost:3000/auth/check', {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          this.isAuthenticated = true;\n          this.username = data.username || 'Пользователь';\n          this.role = data.role || '';\n        } else {\n          console.error('Токен недействителен');\n          localStorage.removeItem('token');\n          this.isAuthenticated = false;\n          this.username = '';\n          this.role = '';\n        }\n      } catch (err) {\n        console.error('Ошибка проверки авторизации:', err);\n        localStorage.removeItem('token');\n        this.isAuthenticated = false;\n        this.username = '';\n        this.role = '';\n      }\n    },\n    async logout() {\n      try {\n        const response = await fetch('http://localhost:3000/auth/logout', {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n\n        if (response.ok) {\n          localStorage.removeItem('token');\n          this.isAuthenticated = false;\n          this.username = '';\n          this.role = '';\n          this.$router.push('/');\n        } else {\n          console.error('Сервер вернул ошибку при выходе');\n        }\n      } catch (err) {\n        console.error('Ошибка выхода:', err);\n        localStorage.removeItem('token');\n        this.isAuthenticated = false;\n        this.username = '';\n        this.role = '';\n        this.$router.push('/');\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.right-panel {\n  position: fixed;\n  top: 50%;\n  right: 0;\n  transform: translateY(-50%);\n  background-color: #f9f9f9;\n  border-left: 1px solid #ddd;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  border-radius: 10px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n/* Убираем маркеры списка и отступы */\n.button-list {\n  list-style-type: none;\n  padding-left: 0;\n  margin: 0;\n}\n\n.button {\n  display: block;\n  margin: 5px 0;\n  padding: 8px 12px;\n  background-color: crimson;\n  color: white;\n  text-decoration: none;\n  border-radius: 4px;\n  transition: background-color 0.3s ease;\n}\n\n.button:hover {\n  background-color: firebrick;\n}\n\n/* Стили для кнопки Админ-панели */\n.admin-button {\n  display: block;\n  margin: 5px 0;\n  padding: 8px 12px;\n  background: linear-gradient(135deg, #ff9800, #f57c00); /* Оранжевый градиент */\n  color: white;\n  text-decoration: none;\n  border-radius: 8px;\n  font-weight: bold;\n  text-transform: uppercase;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);\n  transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;\n  text-align: center; /* Выравнивание текста по центру */\n}\n\n.admin-button:hover {\n  background: linear-gradient(135deg, #f57c00, #e64a19);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);\n}\n\n.welcome-message span {\n  display: block;\n  margin: 5px 0;\n  font-size: 16px;\n  color: #333;\n  font-weight: bold;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}